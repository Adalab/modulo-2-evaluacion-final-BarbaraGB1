"use strict";const personajesList=document.querySelector(".js-charac"),btnSearch=document.querySelector(".js-btnSearch"),input=document.querySelector(".js-inputSearch"),favouritesList=document.querySelector(".js-select"),spoiler=document.querySelector(".js-modal"),btnClose=document.querySelector(".js-btnClose"),blurDiv=document.querySelector(".js-blur"),reset=document.querySelector(".js-reset");let character=[],favourites=[];function listenCurrent(){const e=document.querySelectorAll(".js-clickCharacter");for(const t of e)t.addEventListener("click",handleClickFav)}function handleClickFav(e){e.currentTarget.classList.toggle("selected");const t=character.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=favourites.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?favourites.push(t):favourites.splice(r,1),localStorage.setItem("favourites",JSON.stringify(favourites)),renderFavourites()}function renderFavourites(){let e="";for(const t of favourites)e+=paintFavourites(t);favouritesList.innerHTML=e,listenClickRemove()}function paintFavourites(e){return`<li class="listRenderFav"><article  class= "article js-clickFav "><img class="imgFav" src="${e.img}" alt="Imagen actor/actriz"><h2>${e.name}</h2><h3>${e.status}</h3><button id="${e.char_id}" class="removeFav js-removeFav">Eliminar<img class="imgRemove" src="https://e7.pngegg.com/pngimages/607/869/png-clipart-trachoma-fly-blindness-eye-what-can-i-help-you-with-cartoon-fictional-character.png"></button></article></li>`}function paintCharacter(e){let t="";return t=-1===favourites.findIndex(t=>t.char_id===parseInt(e.char_id))?"":"selected",`<li class="listRender"><article id="${e.char_id}" class= "article ${t} js-clickCharacter"><img class="imgActor" src="${e.img}" alt="Imagen actor/actriz"><h2>${e.name}</h2><h3>${e.status}</h3></article></li>`}function renderSearch(e){let t="";for(let r=0;r<e.length;r++)t+=paintCharacter(e[r]);personajesList.innerHTML=t,listenCurrent()}function handlerClick(e){e.preventDefault();const t=input.value.toLowerCase();renderSearch(character.filter(e=>e.name.toLowerCase().includes(t)))}function listenClickRemove(){const e=document.querySelectorAll(".js-removeFav");for(const t of e)t.addEventListener("click",handleClickRemove)}function handleClickRemove(e){const t=favourites.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));console.log(e.currentTarget.id),-1!==t&&favourites.splice(t,1),localStorage.setItem("favourites",JSON.stringify(favourites)),renderFavourites()}function handleReset(e){e.preventDefault();localStorage.removeItem("favourites"),favourites=[],favouritesList.innerHTML="",renderSearch(character)}fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{character=e,renderSearch(character)}),btnSearch.addEventListener("click",handlerClick),reset.addEventListener("click",handleReset);const savedFavourites=JSON.parse(localStorage.getItem("favourites"));null!==savedFavourites&&(favourites=savedFavourites,renderFavourites());