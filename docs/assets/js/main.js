"use strict";const personajesList=document.querySelector(".js-charac"),btnSearch=document.querySelector(".js-btnSearch"),input=document.querySelector(".js-inputSearch"),favouritesList=document.querySelector(".js-select"),spoiler=document.querySelector(".js-modal"),btnClose=document.querySelector(".js-btnClose"),blurDiv=document.querySelector(".js-blur");let character=[],favourites=[];function listenCurrent(){const e=document.querySelectorAll(".js-clickCharacter");for(const t of e)t.addEventListener("click",handleClickFav)}function handleClickFav(e){console.log(e.currentTarget.id),e.currentTarget.classList.toggle("selected");const t=character.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=favourites.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?favourites.push(t):favourites.splice(r,1),localStorage.setItem("favourites",JSON.stringify(favourites)),renderFavourites()}function renderFavourites(){let e="";for(const t of favourites)e+=paintFavourites(t);favouritesList.innerHTML=e}function paintFavourites(e){return`<li class="listRenderFav"><article id="${e.char_id}" class= "article js-clickFav "><img class="imgActor" src="${e.img}" alt="Imagen actor/actriz"><h2>${e.name}</h2><h3>${e.status}</h3></article></li>`}function paintCharacter(e){let t="";return t=-1===favourites.findIndex(t=>t.char_id===parseInt(e.char_id))?"":"selected",`<li class="listRender"><article id="${e.char_id}" class= "article ${t} js-clickCharacter"><img class="imgActor" src="${e.img}" alt="Imagen actor/actriz"><h2>${e.name}</h2><h3>${e.status}</h3></article></li>`}function renderSearch(e){let t="";for(let r=0;r<e.length;r++)t+=paintCharacter(e[r]);personajesList.innerHTML=t,listenCurrent()}function handlerClick(e){e.preventDefault();const t=input.value.toLowerCase();renderSearch(character.filter(e=>e.name.toLowerCase().includes(t)))}fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{character=e,renderSearch(character)}),btnSearch.addEventListener("click",handlerClick);const savedFavourites=JSON.parse(localStorage.getItem("favourites"));function showModal(){console.log("han pasado 5 segundos"),console.log(spoiler),spoiler.classList.remove("hidden"),blurDiv.classList.remove("hidden")}function handleClose(){spoiler.classList.add("hidden"),blurDiv.classList.add("hidden")}console.log(savedFavourites),null!==savedFavourites&&(favourites=savedFavourites,renderFavourites()),setTimeout(showModal,2e3),btnClose.addEventListener("click",handleClose);